app-id: io.github.silash35.qpdftools
runtime: org.kde.Platform
runtime-version: "5.15"
sdk: org.kde.Sdk
command: qpdftools
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --filesystem=host
  - --device=dri
modules:
  - name: qpdf
    buildsystem: simple
    build-commands:
      - "./configure --prefix=/ --disable-static"
      - "make -j $FLATPAK_BUILDER_N_JOBS"
      - "make DESTDIR=$FLATPAK_DEST install"
    sources:
      - type: archive
        url: https://github.com/qpdf/qpdf/archive/refs/tags/release-qpdf-10.5.0.tar.gz
        sha256: a630e9255e9b1afea490abe4349d1d9383d15cf32316fd6d2a3777bf9d42e086
    cleanup:
      - /include
      - /bin
  - name: qpdftools
    buildsystem: cmake-ninja
    sources:
      - type: dir
        path: ../../
      - type: patch
        path: cmake.patch
